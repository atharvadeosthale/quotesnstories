{"version":3,"sources":["components/Homepage.js","components/Dashboard.js","App.js","index.js"],"names":["Homepage","useState","email","password","loginForm","setLoginForm","role","registerForm","setRegisterForm","auth","setAuth","onChange","e","target","name","value","onChangeRegister","useEffect","localStorage","getItem","onLoginSubmit","a","preventDefault","axios","post","res","token","data","setItem","alert","response","msg","onRegisterSubmit","console","log","to","className","onSubmit","htmlFor","type","placeholder","Dashboard","showRed","setShowRed","showGreen","setShowGreen","error","setError","showButton","config","method","url","headers","permissions","forEach","index","onClick","removeItem","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2a83175a.chunk.js","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst Homepage = () => {\r\n  const [loginForm, setLoginForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [registerForm, setRegisterForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    role: \"admin\",\r\n  });\r\n\r\n  const [auth, setAuth] = useState(false);\r\n\r\n  const onChange = (e) => {\r\n    setLoginForm({ ...loginForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onChangeRegister = (e) => {\r\n    setRegisterForm({ ...registerForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const checkToken = () => {\r\n    if (localStorage.getItem(\"token\")) {\r\n      setAuth(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkToken();\r\n  }, []);\r\n\r\n  const onLoginSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post(\"/api/login\", {\r\n        email: loginForm.email,\r\n        password: loginForm.password,\r\n      });\r\n      const token = res.data.token;\r\n      localStorage.setItem(\"token\", token);\r\n      setAuth(true);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const onRegisterSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post(\"/api/register\", {\r\n        email: registerForm.email,\r\n        password: registerForm.password,\r\n        role: registerForm.role,\r\n      });\r\n      const token = res.data.token;\r\n      localStorage.setItem(\"token\", token);\r\n      setAuth(true);\r\n    } catch (err) {\r\n      console.log(err);\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {auth && <Redirect to=\"/dashboard\" />}\r\n      <div className=\"row\">\r\n        <div className=\"col-md\">\r\n          <form onSubmit={onLoginSubmit}>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">E-Mail</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"email\"\r\n                placeholder=\"E-Mail Address\"\r\n                value={loginForm.email}\r\n                onChange={(e) => onChange(e)}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Enter your password\"\r\n                value={loginForm.password}\r\n                onChange={(e) => onChange(e)}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-success\">\r\n              Login\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div className=\"col-md\">\r\n          <form onSubmit={onRegisterSubmit}>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">E-Mail</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"email\"\r\n                placeholder=\"E-Mail Address\"\r\n                value={registerForm.email}\r\n                onChange={(e) => onChangeRegister(e)}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Enter your password\"\r\n                value={registerForm.password}\r\n                onChange={(e) => onChangeRegister(e)}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"role\">Role</label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"role\"\r\n                placeholder=\"admin / user\"\r\n                value={registerForm.role}\r\n                onChange={(e) => onChangeRegister(e)}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-success\">\r\n              Register\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\n\r\nconst Dashboard = () => {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n\r\n  const [showRed, setShowRed] = useState(false);\r\n  const [showGreen, setShowGreen] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  const showButton = async () => {\r\n    try {\r\n      const config = {\r\n        method: \"get\",\r\n        url: \"/api/auth\",\r\n        headers: { \"x-auth-token\": token },\r\n      };\r\n      const res = await axios(config);\r\n      console.log(res.data.permissions);\r\n      res.data.permissions.forEach(async (value, index) => {\r\n        console.log(\"[index] \" + index + \" \" + value);\r\n        if (value === \"AccessRedButton\") {\r\n          setShowRed(true);\r\n        }\r\n\r\n        if (value === \"AccessGreenButton\") {\r\n          setShowGreen(true);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n      //localStorage.removeItem(\"token\");\r\n      setError(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    showButton();\r\n  }, []);\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    setError(true); // to redirect\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {error && <Redirect to=\"/\" />}\r\n      {showGreen && <Link className=\"btn btn-success\">Green</Link>}\r\n      {showRed && <Link className=\"btn btn-danger\">Red</Link>}\r\n      <br />\r\n      <Link className=\"btn btn-primary\" onClick={() => logout()}>\r\n        Logout\r\n      </Link>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React, { Fragment } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Homepage from \"./components/Homepage\";\nimport Dashboard from \"./components/Dashboard\";\n\nfunction App() {\n  return (\n    <Fragment>\n      <Router>\n        <div className=\"container\">\n          <Switch>\n            <Route exact path=\"/\" component={Homepage} />\n            <Route exact path=\"/dashboard\" component={Dashboard} />\n          </Switch>\n        </div>\n      </Router>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}